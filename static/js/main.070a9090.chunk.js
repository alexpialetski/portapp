(this.webpackJsonpportapp=this.webpackJsonpportapp||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),i=n.n(c),o=n(174),s=n(173),u=n(42),j=n(17),b=n(98),l=Object(b.a)({}),d="assets",O="portfolio",h="upload",f=n(15),p=n(8),x=n(5),m=n(175),g=n(184),v=n(176),y=n(186),w=n(185),k=n(187),S=n(92),I=n.n(S),D=n(93),P=n.n(D),A=n(7),C=n(39),T=n(177),F=n(2),L=function(e){return Object(F.jsx)(m.a,{sx:{margin:"8px 0",flex:"0 1 auto"},children:Object(F.jsxs)(v.a,Object(f.a)(Object(f.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(F.jsx)(T.a,{color:"inherit",href:"https://mui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]}))})},z=n(178),W=Object(A.a)(z.a,{shouldForwardProp:function(e){return"open"!==e&&"drawerWidth"!==e}})((function(e){var t=e.theme,n=e.open,r=e.drawerWidth;return Object(f.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:r,width:"calc(100% - ".concat(r,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),N=n(169),U=Object(A.a)(N.a,{shouldForwardProp:function(e){return"open"!==e&&"drawerWidth"!==e}})((function(e){var t,n=e.theme,r=e.open,a=e.drawerWidth;return{zIndex:n.zIndex.drawer,"& .MuiDrawer-paper":Object(f.a)((t={position:"relative",whiteSpace:"nowrap",width:a,transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen})},Object(x.a)(t,n.breakpoints.down("sm"),{position:"absolute",height:"100%",zIndex:n.zIndex.appBar}),Object(x.a)(t,"boxSizing","border-box"),t),!r&&Object(x.a)({overflowX:"hidden",transition:n.transitions.create("width",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),width:n.spacing(7)},n.breakpoints.up("sm"),{width:n.spacing(9)}))}})),M=Object(A.a)("div")((function(e){return{zIndex:e.theme.zIndex.drawer-1,width:"100vw",height:"100vh",position:"fixed",backgroundColor:"black",animation:"fadeIn 500ms ease",opacity:.2,"@keyframes fadeIn":{from:{opacity:0},to:{opacity:.2}}}})),B=n(180),E=n(181),Y=n(182),_=n(183),J=n(89),R=n.n(J),G=n(88),q=n.n(G),H=n(90),K=n.n(H),V=[{path:"/".concat(h),text:"Upload",Icon:Object(F.jsx)(q.a,{})},{path:"/".concat(O),text:"Portfolio",Icon:Object(F.jsx)(R.a,{})},{path:"/".concat(d),text:"Asset",Icon:Object(F.jsx)(K.a,{})}],X=function(){var e=Object(j.g)(),t=Object(j.h)(),n=Object(r.useCallback)((function(t){return function(){e.push(t)}}),[e]),a=function(e){return t.pathname.includes(e)};return Object(F.jsx)(B.a,{children:V.map((function(e){var t=e.Icon,r=e.text,c=e.path;return Object(F.jsxs)(E.a,{onClick:n(c),selected:a(c),children:[Object(F.jsx)(Y.a,{children:t}),Object(F.jsx)(_.a,{primary:r})]},c)}))})},Q=Object(b.a)(),Z=Object(A.a)("main")((function(e){var t=e.theme;return Object(x.a)({backgroundColor:"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[900],flexGrow:1,height:"100vh",overflow:"auto",display:"flex",flexDirection:"column"},t.breakpoints.down("sm"),{marginLeft:t.spacing(7),width:"calc(100% - ".concat(t.spacing(7),"px)")})})),$=Object(A.a)(M)((function(e){var t=e.theme;return Object(x.a)({},t.breakpoints.up("sm"),{display:"none"})})),ee=function(e){var t,n=e.children,a=Object(j.h)(),c=Object(C.a)(),i=Object(r.useState)(window.innerWidth>c.breakpoints.values.md),u=Object(p.a)(i,2),b=u[0],l=u[1],d=function(){l(!b)},O=null===(t=V.find((function(e){return a.pathname.includes(e.path)})))||void 0===t?void 0:t.text;return Object(F.jsx)(s.a,{theme:Q,children:Object(F.jsxs)(m.a,{sx:{display:"flex"},children:[Object(F.jsx)(o.a,{}),Object(F.jsx)(W,{position:"absolute",open:b,drawerWidth:240,children:Object(F.jsxs)(g.a,{variant:"dense",children:[Object(F.jsx)(w.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:d,sx:Object(f.a)({marginRight:"36px"},b&&{display:"none"}),children:Object(F.jsx)(I.a,{})}),Object(F.jsx)(v.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:O})]})}),Object(F.jsxs)(U,{variant:"permanent",open:b,drawerWidth:240,children:[Object(F.jsx)(g.a,{variant:"dense",sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:Object(F.jsx)(w.a,{onClick:d,children:Object(F.jsx)(P.a,{})})}),Object(F.jsx)(y.a,{}),Object(F.jsx)(X,{})]}),b&&Object(F.jsx)($,{onClick:d}),Object(F.jsxs)(Z,{children:[Object(F.jsx)(g.a,{sx:{flex:"0 1 auto"}}),Object(F.jsx)(k.a,{maxWidth:"lg",sx:{mt:4,mb:4,flexGrow:1,padding:"0 !important"},children:n}),Object(F.jsx)(L,{})]})]})})},te=n(99),ne=n(18),re=n(19),ae=n(72),ce=n(94),ie=function(e){return e.length>22},oe=n(14),se=function(e){return new Date(e).setUTCHours(0,0,0,0)},ue=function(e,t){for(var n=se(e),r=se(t),a=[n];a[a.length-1]<r;)a.push(a[a.length-1]+864e5);return a},je=function(e,t){var n=new Date(e);return n.setDate(n.getDate()-t)},be=function(e){return function(e){for(var t,n=Object.keys(e).sort((function(e,t){return Number(e)-Number(t)})),r={},a=0;a<n.length;a++)t=Object(f.a)({},r[n[a-1]]||{}),r[n[a]]=e[n[a]].reduce((function(e,t){return e[t.symbol]?e[t.symbol]+=t.volume:e[t.symbol]=t.volume,e}),t);return r}(e.filter(ie).reduce((function(e,t){var n=se(+new Date(t[1])),r=e[n]||[];if("BUY Market"===t[2]){var a=t[5].split("/").map((function(e){return e.trim()})),c=Object(p.a)(a,2),i=c[0],o=c[1];r.push({symbol:i,volume:parseFloat(t[19])}),r.push({symbol:o,volume:parseFloat(t[20])})}else r.push({symbol:t[5],volume:parseFloat(t[19])});return Object(f.a)(Object(f.a)({},e),{},Object(x.a)({},n,r))}),{}))},le=function(e){return e.map((function(e){return e.data.values.reduce((function(t,n){var r=Object(p.a)(n,2),a=r[0],c=r[1];return Object(f.a)(Object(f.a)({},t),{},Object(x.a)({},a,{price:c,symbol:e.data.symbol}))}),{})})).reduce((function(e,t){return Object.keys(t).reduce((function(e,n){return Object(f.a)(Object(f.a)({},e),{},Object(x.a)({},n,Object(f.a)(Object(f.a)({},e[n]),{},Object(x.a)({},t[n].symbol,t[n].price))))}),e)}),{})},de=function(e,t){var n=Object.keys(e).map(Number);return Object.keys(t).reduce((function(r,a){var c=function(e,t){var n,r=0,a=Object(oe.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;c<=e&&c>r&&(r=c)}}catch(i){a.e(i)}finally{a.f()}return r}(Number(a),n),i=e[c]||{},o=t[a]||{},s=Object.keys(o).reduce((function(e,t){var n,r=o[t]||0,a=i[t]||0,c=a*r;return Object(f.a)(Object(f.a)({},e),{},(n={},Object(x.a)(n,t,a*r),Object(x.a)(n,"TOTAL",e.TOTAL+c),n))}),{TOTAL:0});return Object(f.a)(Object(f.a)({},r),{},Object(x.a)({},a,s))}),{})},Oe=function(e,t){return Promise.all(e.map((function(e){return"USD"===e?(n=t.start,Promise.resolve({status:{elapsed:0,timestamp:"0"},data:{id:"usd_id",name:"USD",slug:"usd",symbol:"USD",values:ue(Number(n),je(se((new Date).getTime()),1)).map((function(e){return[e,1]}))}})):function(e,t){return fetch("https://data.messari.io/api/v1/assets/".concat(e,"/metrics/price/time-series?").concat(new URLSearchParams(t).toString())).then((function(e){return e.json()}))}(e,t);var n})))},he=Object(r.createContext)({setPortfolio:function(){}}),fe=function(){return Object(r.useContext)(he)},pe=Object(ce.a)("PORTFOLIO_LC_KEY"),xe=function(){function e(){Object(ne.a)(this,e)}return Object(re.a)(e,null,[{key:"getFromStorage",value:function(){var e=localStorage.getItem(Object(ae.a)(this,pe)[pe]);if(e)try{return JSON.parse(e)}catch(t){return}}},{key:"put",value:function(e){localStorage.setItem(Object(ae.a)(this,pe)[pe],JSON.stringify(e))}}]),e}();Object.defineProperty(xe,pe,{writable:!0,value:"PORTFOLIO_LC_KEY"});var me=function(e){var t=e.children,n=Object(r.useState)(xe.getFromStorage()),a=Object(p.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(),s=Object(p.a)(o,2),u=s[0],j=s[1],b=Object(r.useState)(),l=Object(p.a)(b,2),d=l[0],O=l[1];return Object(r.useEffect)((function(){return c&&xe.put(c)}),[c]),Object(r.useEffect)((function(){if(c){var e=function(e){return Object.keys(e).reduce((function(t,n){return t.length<Object.keys(e[n]).length?Object.keys(e[n]):t}),[])}(c),t=Object.keys(c)[0];O(e),Oe(e,{start:t,columns:"close",interval:"1d"}).then(le).then((function(e){return de(c,e)})).then(j)}}),[c]),Object(F.jsx)(he.Provider,{value:{portfolio:c,portfolioAssetDayPrice:u,uniqueAssets:d,setPortfolio:i},children:t})},ge=["children"],ve=function(e){var t=e.children,n=Object(te.a)(e,ge);return fe().portfolio?Object(F.jsx)(j.b,Object(f.a)(Object(f.a)({},n),{},{children:t})):Object(F.jsx)(j.a,{to:"/".concat(h)})},ye=n(95),we=n.n(ye),ke=n(96),Se=n.n(ke),Ie=(n(125),function(){var e=fe().setPortfolio,t=Object(j.g)();return Object(F.jsx)(Se.a,{styles:{dropzone:{overflow:"hidden",height:"100%"}},onSubmit:function(n){n.length&&n[0].file.text().then((function(e){return we.a.parse(e).data})).then((function(e){if(function(e){return!!e.find((function(e){return Boolean(Array.isArray(e)&&2===e.length&&"Broker:"===e[0]&&"Free2ex (free2ex.com)"===e[1])}))}(e))return be(e)})).then((function(r){r?(e(r),t.push("/")):n[0].remove()}))},accept:".csv",multiple:!1})}),De=n(188),Pe=function(){return Object(F.jsx)(m.a,{sx:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},children:Object(F.jsx)(De.a,{})})},Ae=n(97),Ce=function(e){var t=e.portfolioAssetDayPrice,n=e.asset,a=Object(r.useMemo)((function(){return function(e,t){var n=Object.keys(t).map((function(n){return{date:new Date(Number(n)),price:t[n][e]||0}}));return{label:e,data:n}}(n,t)}),[t,n]),c=Object(r.useMemo)((function(){return{getValue:function(e){return e.date}}}),[]),i=Object(r.useMemo)((function(){return[{getValue:function(e){return e.price}}]}),[]);return Object(F.jsx)(Ae.a,{options:{data:[a],primaryAxis:c,secondaryAxes:i}})},Te=function(){var e=fe().portfolioAssetDayPrice;return e?Object(F.jsx)(Ce,{asset:"TOTAL",portfolioAssetDayPrice:e}):Object(F.jsx)(Pe,{})},Fe=n(172),Le=function(){var e=fe(),t=e.portfolioAssetDayPrice,n=e.uniqueAssets;return t&&n?Object(F.jsx)(Fe.a,{container:!0,height:"100%",children:n.map((function(e){return Object(F.jsxs)(Fe.a,{item:!0,md:6,xs:12,mb:5,minHeight:200,children:[Object(F.jsx)(v.a,{variant:"h5",children:e}),Object(F.jsx)(Ce,{asset:e,portfolioAssetDayPrice:t})]},e)}))}):Object(F.jsx)(Pe,{})},ze=function(){return Object(F.jsx)(u.a,{basename:"/portapp",children:Object(F.jsx)(s.a,{theme:l,children:Object(F.jsx)(me,{children:Object(F.jsx)(ee,{children:Object(F.jsxs)(j.d,{children:[Object(F.jsx)(j.b,{exact:!0,path:"/".concat(h),children:Object(F.jsx)(Ie,{})}),Object(F.jsx)(ve,{exact:!0,path:"/".concat(O),children:Object(F.jsx)(Te,{})}),Object(F.jsx)(ve,{exact:!0,path:"/".concat(d),children:Object(F.jsx)(Le,{})}),Object(F.jsx)(j.a,{to:"/".concat(O)})]})})})})})};i.a.render(Object(F.jsxs)(a.a.StrictMode,{children:[Object(F.jsx)(o.a,{}),Object(F.jsx)(ze,{})]}),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.070a9090.chunk.js.map